!function($){var bannerAlerts={latestTimestamp:0,$alertsBannerContainer:null,$alertsBanner:null,$alerts:null,$controls:null,options:[],init:function(){var cookieData=(this.getCookie("last-alert-timestamp")||"0:0").split(":");this.latestTimestamp=cookieData[0]||0,Math.floor((new Date).getTime()/1e3)-(cookieData[1]||0)>=1800&&this.retrieveAlerts(this.latestTimestamp)},retrieveAlerts:function(timestamp){$.post(banner_alerts_vars.ajaxurl,{action:"get_banner_alerts",timestamp:timestamp},(function(data){bannerAlerts.options=data.options,bannerAlerts.addAlertsContainer(),bannerAlerts.addAlerts(data.alerts),""==data.alerts&&bannerAlerts.saveLatestTimestamp()}))},setCookie:function(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+864e5*days),expires="; expires="+date.toUTCString()}document.cookie=encodeURIComponent(name)+"="+encodeURIComponent(value)+expires+"; path=/"},getCookie:function(name){for(var cookie_name=name+"=",decoded_cookie,cookie_array=decodeURIComponent(document.cookie).split(";"),i=0;i<cookie_array.length;i++){for(var current_cookie=cookie_array[i];" "==current_cookie.charAt(0);)current_cookie=current_cookie.substring(1);if(0===current_cookie.indexOf(cookie_name))return current_cookie.substring(cookie_name.length,current_cookie.length)}return null},saveLatestTimestamp:function(){this.setCookie("last-alert-timestamp",this.latestTimestamp+":"+Math.floor((new Date).getTime()/1e3),365)},addAlertsContainer:function(){this.$alertsBannerContainer=$("<div/>",{class:"banner-alerts-container"}),this.$alertsBanner=$("<div/>",{id:"banner-alerts",class:"banner-alerts"}).appendTo(this.$alertsBannerContainer),this.$alerts=$("<div/>",{class:"alerts"}).appendTo(this.$alertsBanner),this.$controls=$("<div/>",{class:"controls"}).appendTo(this.$alertsBanner),this.$alertsBannerContainer.hide(),$("#main-header").prepend(this.$alertsBannerContainer)},addAlerts:function(alerts){var i;for(null===this.$alerts&&this.addAlertsContainer(),i=0;i<alerts.length;i++)this.buildAlertDom(alerts[i]).appendTo(this.$alerts),alerts[i].date_modified_gmt>this.latestTimestamp&&(this.latestTimestamp=alerts[i].date_modified_gmt);alerts.length>0&&(this.addControls(alerts.length),"0"==this.options["display-speed"]?this.$alertsBannerContainer.show(0):this.$alertsBannerContainer.slideDown(this.options["display-speed"]))},addControls:function(count){if(""!=this.options["display-styles"]&&$("<style/>",{text:this.options["display-styles"],type:"text/css"}).prependTo(this.$alertsBannerContainer),count>1&&"1"==this.options["use-slider"]){var container=$("div.banner-alerts > div.alerts");$("<style/>",{text:"#banner-alerts .alert { display: none; } #banner-alerts .alert:first-child { display: block; }",type:"text/css"}).prependTo(this.$alertsBannerContainer),$("<a/>",{text:"<",class:"previous",href:"#"}).on("click",(function(){return container.find(".alert:last-child").prependTo(container),!1})).appendTo(this.$controls),$("<a/>",{text:">",class:"next",href:"#"}).on("click",(function(){return container.find(".alert:first-child").appendTo(container),!1})).appendTo(this.$controls)}"1"==this.options["display-dismiss"]&&$("<a/>",{html:banner_alerts_vars.dismissText,class:"dismiss",href:"#"}).on("click",(function(){return bannerAlerts.dismissAll(),!1})).appendTo(this.$controls)},buildAlertDom:function(alert){var container=$("<div/>",{class:"alert","data-id":alert.id});if("1"==this.options["display-title"]?$("<h2/>").html(alert.title).appendTo(container):"2"==this.options["display-title"]&&$("<h2/>").append($("<a/>",{href:alert.permalink}).html(alert.title)).appendTo(container),"1"==this.options["display-mode"]?$("<div/>").html(alert.content).appendTo(container):"2"==this.options["display-mode"]&&$("<div/>").html(alert.excerpt).appendTo(container),"1"==this.options["display-readmore"])var readmore=$("<a/>",{text:banner_alerts_vars.readMoreText,class:"read-more",href:alert.permalink}).appendTo(container);return container},dismissAll:function(){var timeout;"0"==this.options["display-speed"]?this.$alertsBannerContainer.hide(0):this.$alertsBannerContainer.slideUp(this.options["display-speed"]),timeout="number"==typeof bannerAlerts.options["display-speed"]?bannerAlerts.options["display-speed"]:400,setTimeout((function(){bannerAlerts.$alertsBannerContainer.find("style").remove()}),timeout),this.saveLatestTimestamp()}},isCrawler;navigator.userAgent.match(/(googlebot)|(yandexbot)|(baiduspider)|(bingbot)|(slurp)/i)||bannerAlerts.init()}(jQuery);